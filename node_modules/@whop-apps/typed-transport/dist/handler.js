"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "createHandler", {
    enumerable: true,
    get: function() {
        return createHandler;
    }
});
const _sdk = require("./sdk");
function createHandler({ schema, forceCompleteness, handlers }) {
    let eventHandler;
    (0, _sdk.createSDK)({
        clientSchema: undefined,
        serverSchema: schema,
        localAppId: "client",
        remoteAppId: "server",
        forceCompleteness,
        serverImplementation: handlers,
        transport: {
            send () {
            // empty, only handling incoming events
            },
            recv (handler) {
                eventHandler = handler;
            }
        }
    });
    return (event, data)=>{
        return eventHandler(`server:${event}`, data);
    };
}
