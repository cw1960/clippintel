"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "syncHref", {
    enumerable: true,
    get: function() {
        return syncHref;
    }
});
function syncHref({ onChange }) {
    if (typeof window === "undefined") return;
    const initialHref = window.location.href;
    onChange({
        href: initialHref
    }).catch(()=>null);
    let lastKnown = initialHref;
    window.addEventListener("popstate", ()=>{
        const { href } = window.location;
        onChange({
            href
        }).catch(()=>null);
        lastKnown = href;
    });
    if (window._whop_sync_href_interval) {
        clearInterval(window._whop_sync_href_interval);
    }
    window._whop_sync_href_interval = setInterval(()=>{
        const { href } = window.location;
        if (href === lastKnown) return;
        onChange({
            href
        }).catch(()=>null);
        lastKnown = href;
    }, 250);
}
